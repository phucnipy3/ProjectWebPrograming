@model MVC.Models.DetailViewModel
@{
    ViewBag.Title = "Detail";
    ViewBag.Active = "#ProductBtn";
}

<div class="container-fluid">
    <div class="modal fade" id="modalMessage" tabindex="-1" role="dialog" aria-labelledby="phucni" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Message</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-auto mx-auto">
                            <p class="text-center">
                                <h5> Please login to comment</h5>
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-auto mx-auto">
                            <a data-dismiss="modal" class="btn btn-primary ">OK</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container pt-5">
    <div class="row">
        <div class="col-lg-3 col-6 mx-auto">
            <img src="~/Resource/chitiet/1.png" alt="Alternate Text" width="100% " />
        </div>
        <div class="">

        </div>
        <div class="col-lg-8 col-12 pt-3">
            <div class="row">
                <div class="col-lg-7 col-md-6 col-9 mx-auto">
                    <h3 class="text-success">Giới thiệu</h3>
                    <p class="h2 text-info py-3">
                        @Model.MainProduct.Name
                    </p>
                    <p>Thiết kế: <span class="text-success">@Model.MainProduct.Author</span></p>
                    <hr />
                    <h3>Thông tin kèm theo</h3>
                    <ul>
                        @for (int i = 0; i < 4; i++)
                        {
                            <li>Infomation @i</li>
                        }
                    </ul>
                </div>
                <div class="col-lg-5 col-md-6 col-9 mx-auto">
                    <h5>Thông tin thanh toán</h5>
                    <hr />
                    @if (Model.MainProduct.PromotionPrice != Model.MainProduct.Price)
                    {
                        <p>Giá gốc: <del>@Model.MainProduct.Price</del></p>
                        <p>Giá bán: <span class="h2 text-danger">@Model.MainProduct.PromotionPrice</span></p>
                        <p>Tiết kiệm: @Model.SavePersent</p>
                    }
                    else
                    {
                        <p>Giá bán: <span class="h2 text-danger">@Model.MainProduct.Price</span></p>
                    }
                    <hr />
                    <a href="/Cart/AddToCart/@Model.MainProduct.ID" class="btn btn-info text-black btn-buy">Mua ngay</a>
                </div>
            </div>
        </div>
    </div>

    <div class="row pt-5">
        <div class="col-12 col-lg-8">
            <div class="row p-3 border-dark">
                <div class="rate-point col-2 align-self-center text-warning px-0 offset-lg-1">
                    @Model.Rate.RatePoint <i class="fas fa-star"></i>
                </div>
                <div class="col-5">
                    <ul class="navbar-nav">
                        <li class="">
                            5 <i class="fas fa-star"></i>
                            <div style="width:80%" class="float-right pt-1">
                                <div class="progress bg">
                                    <div class="progress-bar progress-bar-striped bg-secondary" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:@(Model.Rate.PercentFivePoint)%"></div>
                                </div>
                            </div>
                        </li>
                        <li class="">
                            4 <i class="fas fa-star"></i>
                            <div style="width:80%" class="float-right pt-1">
                                <div class="progress bg">
                                    <div class="progress-bar progress-bar-striped bg-secondary" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:@(Model.Rate.PercentFourPoint)%"></div>
                                </div>
                            </div>

                        </li>
                        <li class="">
                            3 <i class="fas fa-star"></i>
                            <div style="width:80%" class="float-right pt-1">
                                <div class="progress bg">
                                    <div class="progress-bar progress-bar-striped bg-secondary" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:@(Model.Rate.PercentThreePoint)%"></div>
                                </div>
                            </div>

                        </li>
                        <li class="">
                            2 <i class="fas fa-star"></i>
                            <div style="width:80%" class="float-right pt-1">
                                <div class="progress bg">
                                    <div class="progress-bar progress-bar-striped bg-secondary" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:@(Model.Rate.PercentTwoPoint)%"></div>
                                </div>
                            </div>

                        </li>
                        <li class="">
                            1 <i class="fas fa-star"></i>
                            <div style="width:80%" class="float-right pt-1">
                                <div class="progress bg">
                                    <div class="progress-bar progress-bar-striped bg-secondary" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:@(Model.Rate.PercentOnePoint)%"></div>
                                </div>
                            </div>

                        </li>
                    </ul>
                </div>
                <div class="col-auto align-self-center mx-auto">
                    <a href="#RateBar" data-toggle="collapse" aria-controls="RateBar" class="btn btn-primary" id="OpenRate">Rate your point</a>
                </div>
                <div class="col-12 offset-lg-1 rate-pick p-3 collapse" id="RateBar">
                    <span class="mr-3">Please rate us</span>
                    <span>
                        <a href="/Product/Rate?point=1" id="star1" class="text-decoration-none star-link"><i class="far fa-star star " id="iconStart1"></i> </a>
                        <a href="/Product/Rate?point=2" id="star2" class="text-decoration-none star-link"><i class="far fa-star star " id="iconStart2"></i> </a>
                        <a href="/Product/Rate?point=3" id="star3" class="text-decoration-none star-link"><i class="far fa-star star " id="iconStart3"></i> </a>
                        <a href="/Product/Rate?point=4" id="star4" class="text-decoration-none star-link"><i class="far fa-star star " id="iconStart4"></i> </a>
                        <a href="/Product/Rate?point=5" id="star5" class="text-decoration-none star-link"><i class="far fa-star star " id="iconStart5"></i> </a>

                    </span>
                </div>
            </div>

            <div class="row comment-create">
                <div class="col-12">
                    <textarea style="width:100%" rows="4"></textarea>
                </div>
                <div class="col-auto ml-auto">
                    <a href="#" id="btnComment" class="btn btn-secondary">comment</a>
                </div>
            </div>
            <div class="row comment-section text-justify">
                <div class="col-12">
                    <div class="row comment">
                        <div class="col-auto">
                            <img src="~/Resource/support.png" alt="Alternate Text" class="rounded-circle comment-image d-block" />
                        </div>
                        <div class="col pl-0 comment-body">
                            <div class="row">
                                <div class="col-12 comment-name">
                                    <span>dfghdfgdf</span>
                                </div>
                                <div class="col-12 comment-text">
                                    <p>sdfhsdfgjfkjshkjscnvjcvn nkxcjvnksn kdjfn kjn kjdfg kjsjf s dfg d dfg s</p>
                                </div>
                                <div class="col-12 comment-tools">
                                    <ul class="p-0">
                                        <li class="d-inline-block"><i class="fa fa-clock-o"></i> 13:94 &emsp;</li>
                                        <li class="d-inline-block"><i class="fa fa-calendar"></i> 04/01/2015 &emsp;</li>
                                        <li class="d-inline-block"><a href="#" class="text-decoration-none text-info">reply</a></li>
                                    </ul>
                                </div>
                                <div class="col-12 comment-replies">
                                    <div class="row comment">
                                        <div class="col-auto">
                                            <img src="~/Resource/support.png" alt="Alternate Text" class="rounded-circle comment-image d-block" />
                                        </div>
                                        <div class="col pl-0 comment-body">
                                            <div class="row">
                                                <div class="col-12 comment-name">
                                                    <span>dfghdfgdf</span>
                                                </div>
                                                <div class="col-12 comment-text">
                                                    <p>sdfhsdfgjfkjshkjscnvjcvn nkxcjvnksn kdjfn kjn kjdfg kjsjf s dfg d dfg s</p>
                                                </div>
                                                <div class="col-12 comment-tools">
                                                    <a href="#" class="text-decoration-none text-info">reply</a>
                                                </div>
                                                <div class="col-12 comment-replies">

                                                </div>

                                            </div>

                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-12 col-lg-4 ">
            <div class="row">
                <div class="col-auto mr-auto">
                    <h3>Liên quan</h3>
                </div>
                <div class="col-12">

                    <div class="view view-eighth">

                        <a href="/Product/Detail/1" class="text-decoration-none text-dark product">
                            <div class="row">
                                <div class="col-6">
                                    <div class="card border-0">
                                        <img src="~/Resource/chitiet/1.png" alt="Alternate Text" class="image-on-home m-auto" />
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="card-body p-0">
                                        <div class="row">
                                            <div class="col-12 pt-2 product-name overflow-hidden">
                                                <p>Ốp lưng siêu xịn xò siêu to khổng lồ bla bla bla bal bla</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 pt-2 product-price">
                                                @*@if (item.PromotionPrice != 0)
                                                    {
                                                        <p>
                                                            @item.PromotionPrice <u>đ</u>
                                                        </p>
                                                    }
                                                    else
                                                    {
                                                        <p>
                                                            @item.Price <u>đ</u>
                                                        </p>
                                                    }*@
                                                <p>10000 <u>đ</u></p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 pt-2 product-discount">
                                                @*@if (item.PromotionPrice != 0)
                                                    {
                                                        <del>
                                                            @item.Price <u>đ</u>
                                                        </del>
                                                    }*@
                                                <del>12000 <u>đ</u></del>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12 pt-2 product-rate">

                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>


                        </a>
                        <div class="mask">
                            <div class="row h-custom-40 align-content-end">
                                <div class="col-auto mx-auto">
                                    <a href="#" class="add">Add To Cart</a>
                                </div>
                            </div>
                            <div class="row h-custom-15 align-content-center">
                                <div class="col-auto mx-auto">
                                    <a href="/Product/Detail/1" class="info">View More</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function SetAuthen() {
        document.getElementById("btnComment").classList.add("authen");
    }
    function ClearAuthen() {
        var element = document.getElementById("btnComment");
        if (element.classList.contains("authen"))
            element.classList.remove("authen");
    }
</script>
@if (User.Identity.IsAuthenticated)
{
    <script>
        SetAuthen();
    </script>
}
else
{
    <script>
        ClearAuthen();
    </script>
}
@section scripts{
    <script>
        $(document).ready(function () {
            $("#OpenRate").click(function () {
                if ($("#OpenRate").html() == "Rate your point")
                    $("#OpenRate").html('Close');
                else
                    $("#OpenRate").html("Rate your point");
            });
            $("#star5").hover(function () {

                $(".star").removeClass("fas");
                $(".star").removeClass("far");
                $("#iconStart1").addClass("fas");
                $("#iconStart2").addClass("fas");
                $("#iconStart3").addClass("fas");
                $("#iconStart4").addClass("fas");
                $("#iconStart5").addClass("fas");
                return false;
            });
            $("#star4").hover(function () {
                $(".star").removeClass("fas");
                $(".star").removeClass("far");
                $("#iconStart1").addClass("fas");
                $("#iconStart2").addClass("fas");
                $("#iconStart3").addClass("fas");
                $("#iconStart4").addClass("fas");
                $("#iconStart5").addClass("far");
            });
            $("#star3").hover(function () {
                $(".star").removeClass("fas");
                $(".star").removeClass("far");
                $("#iconStart1").addClass("fas");
                $("#iconStart2").addClass("fas");
                $("#iconStart3").addClass("fas");
                $("#iconStart4").addClass("far");
                $("#iconStart5").addClass("far");
            });
            $("#star2").hover(function () {
                $(".star").removeClass("fas");
                $(".star").removeClass("far");
                $("#iconStart1").addClass("fas");
                $("#iconStart2").addClass("fas");
                $("#iconStart3").addClass("far");
                $("#iconStart4").addClass("far");
                $("#iconStart5").addClass("far");
            });
            $("#star1").hover(function () {
                $(".star").removeClass("fas");
                $(".star").removeClass("far");
                $("#iconStart1").addClass("fas");
                $("#iconStart2").addClass("far");
                $("#iconStart3").addClass("far");
                $("#iconStart4").addClass("far");
                $("#iconStart5").addClass("far");
            });
            $(".star-link").mouseleave(function () {
                $(".star").removeClass("fas");
                $(".star").addClass("far");
            });
            $("#btnComment").click(function (e) {
                if (!$(this).hasClass('authen')) {
                    $("#modalMessage").modal('show');
                    return false;
                }
            });

        });

    </script>
}